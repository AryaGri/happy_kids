# Пошаговая выкладка сайта на хостинг

Подробная инструкция: где заходить, что нажимать, что вводить.

---

## ⚠️ FileZilla (FTP) — не подходит

Этот проект — **Django** (Python). Его нельзя просто загрузить по FTP как статичный сайт.

- **FileZilla** — для загрузки файлов на хостинг по FTP
- Обычный хостинг (Reg.ru, Beget, Timeweb и т.п.) чаще всего для **PHP/HTML**, а не для Django
- Django нужен сервер с Python, базой данных и WSGI

**Что использовать вместо FTP:**
1. **Render.com** — код загружается через **GitHub**, FTP не нужен (инструкция ниже)
2. Или **VPS** (сервер с Linux) — там настраивают Python и Django вручную

---


## Часть 1. GitHub — загрузка кода

### 1.1. Регистрация на GitHub (если ещё нет аккаунта)

1. Откройте в браузере: **https://github.com**
2. Справа вверху нажмите **Sign up**
3. Заполните email, пароль, имя пользователя
4. Подтвердите email

### 1.2. Создание репозитория

1. Войдите на **https://github.com**
2. Справа вверху нажмите **+** → **New repository**
3. Заполните:
   - **Repository name**: например `happy-kids` или `my_project`
   - **Description**: можно оставить пустым
   - **Public** — оставьте включённым
   - **НЕ** ставьте галочку «Add a README»
4. Нажмите **Create repository**

### 1.3. Загрузка проекта в репозиторий

1. Откройте **PowerShell** или **Терминал**
2. Перейдите в папку проекта:
   ```
   cd C:\Users\ayagr\my_project
   ```
3. Выполните команды (подставьте свой логин и имя репозитория):
   ```
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/ВАШ_ЛОГИН/ИМЯ_РЕПО.git
   git push -u origin main
   ```
4. При первом `git push` может попросить логин и пароль GitHub (или токен)

---

## Часть 2. Render — деплой сайта

### 2.1. Регистрация на Render

1. Откройте **https://render.com**
2. Нажмите **Get Started for Free**
3. Выберите **Sign up with GitHub**
4. Разрешите Render доступ к GitHub (Authorize)

### 2.2. Создание проекта через Blueprint

1. На главной странице Render нажмите **New +** (синяя кнопка справа вверху)
2. В выпадающем меню выберите **Blueprint**
3. Откроется страница «Create a new Blueprint»
4. Нажмите **Connect a repository** (или **Connect account** если репозиторий ещё не подключён)
5. Выберите **GitHub** и найдите ваш репозиторий (например `happy-kids`)
6. Нажмите **Connect** рядом с нужным репозиторием
7. Render покажет, что найдёт `render.yaml` — нажмите **Apply**
8. Подождите 3–5 минут, пока идёт сборка (Build)

### 2.3. Где смотреть статус

- Слева в списке сервисов: **platform** (веб-сайт) и **platform-db** (база данных)
- Кликните **platform**
- Вверху: **Events** — лог сборки
- Когда статус станет **Live** (зелёный) — сайт работает

### 2.4. Адрес сайта

- В карточке сервиса **platform** вверху будет ссылка вида:
  ```
  https://platform-xxxx.onrender.com
  ```
- Нажмите на неё — откроется ваш сайт

---

## Часть 3. Создание администратора

1. В Render откройте сервис **platform** (клик по названию слева)
2. В левом меню выберите **Shell**
3. Нажмите **Connect** — откроется терминал
4. Введите команду и нажмите Enter:
   ```
   python manage.py create_admin
   ```
5. Должно появиться сообщение об успешном создании
6. Выйдите из Shell (закройте вкладку или введите `exit`)

**Логин:** admin1  
**Пароль:** 123456  

Смените пароль после первого входа.

---

## Часть 4. Подключение домена happy-kids-iu6.ru

### 4.1. Добавление домена в Render

1. В Render откройте сервис **platform**
2. В левом меню нажмите **Settings**
3. Прокрутите до блока **Custom Domains**
4. Нажмите **Add Custom Domain**
5. Введите `happy-kids-iu6.ru` и нажмите **Save**
6. Повторите: **Add Custom Domain** → `www.happy-kids-iu6.ru` → **Save**
7. Render покажет, какие DNS-записи нужно создать (запомните или скопируйте)

### 4.2. Настройка DNS у регистратора домена

Где вы покупали домен? (Reg.ru, Timeweb, Beget, Cloudflare и т.п.)

1. Войдите в панель управления доменом
2. Найдите раздел **DNS**, **Управление DNS**, **Зоны** или похожий
3. Добавьте записи:

**Для www (поддомен):**
- Тип: **CNAME**
- Имя/Хост: `www` (или `www.happy-kids-iu6.ru` — зависит от панели)
- Значение: `platform-xxxx.onrender.com` (ваш URL из Render, без https://)

**Для корня (happy-kids-iu6.ru без www):**
- Вариант А: если Render показал IP-адрес — создайте запись **A** с именем `@` и этим IP
- Вариант Б: если есть «CNAME для корня» или «ALIAS» — используйте его, значение `platform-xxxx.onrender.com`

4. Сохраните изменения
5. Подождите 5–30 минут (распространение DNS)
6. В Render в блоке Custom Domains статус должен стать **Verified** (галочка)

---

## Часть 5. Десктопное приложение

1. Запустите `.\run_desktop.bat` или `python desktop_client\main.py`
2. В поле «Адрес сервера» введите: `https://happy-kids-iu6.ru`
3. Нажмите «Проверить подключение», затем «Войти»
4. Войдите под своей учётной записью

---

## Частые вопросы

**Deploy failed / Сборка упала**  
1. В Render: сервис **platform** → **Logs** — скопируйте последние строки с ошибкой  
2. **Ошибка «admin1 is duplicated»** — база уже содержит дубликаты. Варианты:
   - Удалите базу **platform-db** в Render (Dashboard → platform-db → Delete), затем нажмите **Manual sync** в Blueprint — база создастся заново
   - Или оставьте как есть — после исправления миграции заново задеплойте
3. Типичные причины:
   - Gunicorn не слушает порт — в `render.yaml` должно быть `--bind 0.0.0.0:$PORT`
   - Ошибка миграций — проверьте Logs
   - После правок — сделайте `git push`, Render пересоберёт автоматически

**Сайт не открывается после деплоя**  
Подождите 2–3 минуты. Проверьте статус **Live** в Render.

**«502 Bad Gateway»**  
Сборка ещё идёт или упала. Смотрите вкладку **Logs** в Render.

**Домен не верифицируется**  
Проверьте DNS-записи. Используйте https://dnschecker.org — введите домен и посмотрите, видны ли записи.

**Сайт «засыпает»**  
На бесплатном плане Render сервис останавливается после 15 минут без запросов. Первый запрос может занимать до минуты.
